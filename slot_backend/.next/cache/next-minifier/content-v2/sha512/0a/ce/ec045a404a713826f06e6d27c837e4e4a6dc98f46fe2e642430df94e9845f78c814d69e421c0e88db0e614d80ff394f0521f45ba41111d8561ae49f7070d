{"code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[19],{NPrD:function(e,t,a){\"use strict\";a.r(t),a.d(t,\"default\",(function(){return C}));var n=a(\"o0o1\"),s=a.n(n),r=a(\"HaE+\"),o=a(\"1OyB\"),l=a(\"vuIU\"),i=a(\"JX7q\"),c=a(\"Ji7U\"),u=a(\"md7G\"),d=a(\"foSv\"),g=a(\"rePB\"),m=a(\"4q6W\"),h=(a(\"YFqc\"),a(\"q1tI\")),f=a.n(h),p=a(\"nOHt\"),v=a.n(p),_=a(\"p46w\"),b=a.n(_),S=a(\"hryD\"),N=a(\"baXo\"),y=a.n(N),k=f.a.createElement;function w(e){var t=function(){if(\"undefined\"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if(\"function\"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=Object(d.a)(e);if(t){var s=Object(d.a)(this).constructor;a=Reflect.construct(n,arguments,s)}else a=n.apply(this,arguments);return Object(u.a)(this,a)}}var C=function(e){Object(c.a)(a,e);var t=w(a);function a(e){var n;return Object(o.a)(this,a),n=t.call(this,e),Object(g.a)(Object(i.a)(n),\"handleSwitchChange\",(function(e){return function(){var t=\"switch\".concat(e);n.setState(Object(g.a)({},t,!n.state[t]))}})),n.state={userid:b.a.get(\"uagentid\"),agent_code:\"\",user_name:\"\",user_email:\"\",user_pass:\"\",add_date:\"\",user_level:\"3\",user_status:\"\",switch1:!0,agent:\"\",errorMessage:\"\",datas:[],role_data:[],mydatas:{},value:\"Master\",data_agent:[],role:\"3\",rolename:\"User\"},n.handleSelectChange=n.handleSelectChange.bind(Object(i.a)(n)),n.handleToggleChange=n.handleToggleChange.bind(Object(i.a)(n)),n.handleSubmit=n.handleSubmit.bind(Object(i.a)(n)),n.setErrorMsg=n.setErrorMsg.bind(Object(i.a)(n)),n.onClick=n.onClick.bind(Object(i.a)(n)),n.onConfirmClick=n.onConfirmClick.bind(Object(i.a)(n)),n.handleResetSubmit=n.handleResetSubmit.bind(Object(i.a)(n)),n.onSearchLevel=n.onSearchLevel.bind(Object(i.a)(n)),n.onSearchAgentCode=n.onSearchAgentCode.bind(Object(i.a)(n)),n.handleSelectAgentChange=n.handleSelectAgentChange.bind(Object(i.a)(n)),n.SearchAgent=n.SearchAgent.bind(Object(i.a)(n)),n.onSearchLevelname=n.onSearchLevelname.bind(Object(i.a)(n)),n}return Object(l.a)(a,[{key:\"SearchAgent\",value:function(e){return console.log(\"get agent_code\"),this.state.data_agent.filter((function(t){return t.agent_name==e})).map((function(e,t){return e.agent_code}))[0]}},{key:\"handleSelectAgentChange\",value:function(e){e.preventDefault(),console.log(\"e.target.value =>\"+e.target.value),this.setState({agent:e.target.value});var t=this.SearchAgent(e.target.value);b.a.set(\"_Agent\",e.target.value),this.setState({agent_code:t})}},{key:\"onSearchLevelname\",value:function(e){return console.log(\"get myrole\"),this.state.role_data.filter((function(t){return t.user_level_id==e})).map((function(e,t){return e.user_level_name}))[0]}},{key:\"onSearchLevel\",value:function(e){return console.log(\"get myrole\"),this.state.role_data.filter((function(t){return t.user_level_name==e})).map((function(e,t){return e.user_level_id}))[0]}},{key:\"onSearchAgentCode\",value:function(e){return console.log(\"get Agent Code\"),this.state.agentdata.filter((function(t){return t.agent_name==e})).map((function(e,t){return e.agent_code}))}},{key:\"onSearchAgentName\",value:function(e){return console.log(\"get Agent Name\"),this.state.agentdata.filter((function(t){return t.agent_code==e})).map((function(e,t){return e.agent_name}))}},{key:\"onClick\",value:function(){this.dialog.showAlert(\"Hello Dialog!\")}},{key:\"handleResetSubmit\",value:function(){v.a.push(\"/agent_users\")}},{key:\"onConfirmClick\",value:function(){this.dialog.show({title:\"Spiderbot confirm\",body:\"Are you sure?\",actions:[y.a.CancelAction((function(){dialog.hide()})),y.a.OKAction((function(){}))],bsSize:\"small\",onHide:function(e){e.hide(),console.log(\"closed by clicking background.\")}})}},{key:\"handleSubmit\",value:function(){var e=Object(r.a)(s.a.mark((function e(){var t,a,n,r;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,\"\"===this.state.agent_code||!this.state.user_name){e.next=19;break}if(t=0,this.state.switch1&&(t=1),a=!1,n={},\"\"!==this.state.user_pass?this.state.user_pass==this.state.confirmpassword&&(n={agent_code:this.state.agent_code,user_name:this.state.user_name,user_email:this.state.user_email,user_pass:this.state.user_pass,user_level:this.state.user_level,user_status:t},a=!0):(n={agent_code:this.state.agent_code,user_name:this.state.user_name,user_email:this.state.user_email,user_level:this.state.user_level,user_status:t},a=!0),console.log(\"a : \"+JSON.stringify(n)),!a){e.next=16;break}return e.next=11,S.h.editUserAgent(n,this.state.userid);case 11:r=e.sent,console.log(\"res : \"+r.data),2e3===r.data.status?(console.log(\"Edit User Agent Success!!!\"),this.dialog.show({title:\"Slot Admin information\",body:\"Edit a user agent : \"+n.user_name+\" is successfully.\",actions:[y.a.OKAction((function(){v.a.push(\"/agent_users\")}))]})):(this.dialog.showAlert(r.data.message),this.setErrorMsg(r.data.msg)),e.next=17;break;case 16:this.dialog.showAlert(\"\\u0e01\\u0e23\\u0e38\\u0e13\\u0e32 confirm password \\u0e43\\u0e2b\\u0e49\\u0e16\\u0e39\\u0e01\\u0e15\\u0e49\\u0e2d\\u0e07!\");case 17:e.next=20;break;case 19:this.dialog.showAlert(\"\\u0e01\\u0e23\\u0e38\\u0e13\\u0e32\\u0e43\\u0e2a\\u0e48\\u0e02\\u0e49\\u0e2d\\u0e21\\u0e39\\u0e25\\u0e43\\u0e2b\\u0e49\\u0e04\\u0e23\\u0e1a \\u0e01\\u0e48\\u0e2d\\u0e19\\u0e01\\u0e14\\u0e1b\\u0e38\\u0e48\\u0e21 Save!\");case 20:e.next=27;break;case 22:e.prev=22,e.t0=e.catch(0),this.dialog.showAlert(e.t0),console.error(\"An unexpected error happened occurred:\",e.t0),this.setErrorMsg(e.t0.message);case 27:case\"end\":return e.stop()}}),e,this,[[0,22]])})));return function(){return e.apply(this,arguments)}}()},{key:\"handleSelectChange\",value:function(e){console.log(\"e.target.value :\"+e.target.value),this.setState({rolename:e.target.value});var t=this.onSearchLevel(e.target.value);this.setState({role:t,user_level:t})}},{key:\"handleToggleChange\",value:function(e){console.log(\"e.target.value :\"+e.target.value),this.setState({user_enable:e.target.value})}},{key:\"setErrorMsg\",value:function(e){console.log(e),this.setState({errorMessage:e})}},{key:\"componentDidMount\",value:function(){var e=this;b.a.get(\"user\")||v.a.push(\"/\"),b.a.get(\"uagentid\")||v.a.push(\"/agent_users\"),S.g.listSystemRole().then((function(t){console.log(\"res data=>\"+t.data);var a=t.data,n=a.data,s=a.status;console.log(\"status=>\"+s),2e3===s?(console.log(\"data :=>\"+n),e.setState({role_data:n})):e.dialog.showAlert(t.data.message)}));S.a.listAgent().then((function(t){console.log(t.data);var a=t.data,n=a.data;if(2e3===a.status){console.log(\"data agent length : \"+n.length),e.setState({data_agent:n});b.a.get(\"_Agent\")&&e.setState({agent_code:e.SearchAgent(b.a.get(\"_Agent\"))}),S.h.getUserAgent(e.state.userid).then((function(t){var a=t.data,n=a.data;if(2e3===a.status){console.log(\"edit data =>\"+JSON.stringify(n));var s=n[0],r=s.user_name,o=s.user_email,l=s.user_level,i=s.user_status,c=s.agent_code,u=e.state.data_agent.filter((function(e){return e.agent_code==c})).map((function(e,t){return e.agent_name}));e.setState({agent_code:c,agent:u,user_name:r,user_email:o,role:l,rolename:e.onSearchLevelname(l),switch1:Boolean(Number(i))})}else e.setErrorMsg(t.data.message),e.dialog.showAlert(t.data.message)}))}}))}},{key:\"render\",value:function(){var e=this;k(\"div\",{className:\"toggle-switch\"},k(\"input\",{type:\"checkbox\",\"data-toggle\":\"toggle\",\"data-on\":\"Ready\",\"data-off\":\"Not Ready\",\"data-onstyle\":\"success\",\"data-offstyle\":\"danger\"}));return k(m.a,{contentTitle:\"Edit Agent Users\",contentTitleButton:k(\"i\",{className:\"fa fa-2x fa-address-card\"}),url:this.props.url},k(\"div\",{className:\"offset-md-0\"},k(\"div\",{className:\"card\"},k(\"div\",{className:\"card-header\"}),k(\"form\",{className:\"form-horizontal\"},k(\"div\",{className:\"card-body\"},k(\"div\",{className:\"form-group\"},k(\"div\",{className:\"col-sm-12\"},k(\"label\",{htmlFor:\"select-1\",className:\"col-sm-12 control-label\"},\"Select Agent\"),k(\"div\",{className:\"col-sm-offset-2 col-sm-12\"},k(\"select\",{id:\"select-3\",className:\"form-control\",value:this.state.agent,onChange:this.handleSelectAgentChange},this.state.data_agent.map((function(e,t){return k(\"option\",{value:e.agent_name,key:t},e.agent_name)})))))),k(\"div\",{className:\"form-group\"},k(\"div\",{className:\"col-sm-12\"},k(\"div\",{className:\"input-group mb-3 input-group-sm\"},k(\"div\",{className:\"input-group-prepend\"},k(\"span\",{className:\"input-group-text\"},\"agent code\")),k(\"input\",{type:\"text\",className:\"form-control \",id:\"validation-ex2\",onChange:function(t){return e.setState({agent_code:t.target.value})},value:this.state.agent_code,required:!0,disabled:!0})))),k(\"div\",{className:\"form-group\"},k(\"div\",{className:\"col-sm-12\"},k(\"div\",{className:\"input-group mb-3 input-group-sm\"},k(\"div\",{className:\"input-group-prepend\"},k(\"span\",{className:\"input-group-text\"},\"user name\")),k(\"input\",{type:\"text\",className:\"form-control \",id:\"validation-ex3\",onChange:function(t){return e.setState({user_name:t.target.value})},value:this.state.user_name,required:!0})))),k(\"div\",{className:\"form-group\"},k(\"div\",{className:\"col-sm-12\"},k(\"div\",{className:\"input-group mb-3 input-group-sm\"},k(\"div\",{className:\"input-group-prepend\"},k(\"span\",{className:\"input-group-text\"},\"user email\")),k(\"input\",{type:\"text\",className:\"form-control \",id:\"validation-ex4\",onChange:function(t){return e.setState({user_email:t.target.value})},value:this.state.user_email,required:!0})))),k(\"div\",{className:\"form-group\"},k(\"div\",{className:\"col-sm-12\"},k(\"div\",{className:\"input-group mb-3 input-group-sm\"},k(\"div\",{className:\"input-group-prepend\"},k(\"span\",{className:\"input-group-text\"},\"Password\")),k(\"input\",{type:\"password\",className:\"form-control \",id:\"validation-ex3\",onChange:function(t){return e.setState({user_pass:t.target.value})},value:this.state.user_pass,required:!0})))),k(\"div\",{className:\"form-group\"},k(\"div\",{className:\"col-sm-12\"},k(\"div\",{className:\"input-group mb-3 input-group-sm\"},k(\"div\",{className:\"input-group-prepend\"},k(\"span\",{className:\"input-group-text\"},\"Confirm Password\")),k(\"input\",{type:\"password\",className:\"form-control \",id:\"validation-ex4\",onChange:function(t){return e.setState({confirmpassword:t.target.value})},value:this.state.confirmpassword,required:!0})))),k(\"div\",{className:\"form-group\"},k(\"label\",{htmlFor:\"select-1\",className:\"col-sm-12 control-label\"},\"Select user level\"),k(\"div\",{className:\"col-sm-offset-2 col-sm-12\"},k(\"select\",{id:\"select-1\",className:\"form-control\",value:this.state.rolename,onChange:this.handleSelectChange},this.state.role_data.map((function(e,t){return k(\"option\",{key:t,value:e.user_level_name},e.user_level_name)}))))),k(\"div\",{className:\"form-group\"},k(\"div\",{className:\"col-sm-12\"},k(\"label\",{class:\"switch\"},k(\"input\",{type:\"checkbox\",onChange:this.handleSwitchChange(1),checked:this.state.switch1}),k(\"span\",{class:\"slider round\"})),k(\"label\",{className:\"control-label\"},\"\\xa0\\xa0Enabled\"))))),k(\"div\",{className:\"card-footer\"},k(\"div\",{className:\"d-inline-block btn-block\"},k(\"button\",{className:\"btn btn-danger\",onClick:this.handleResetSubmit},\"Back\"),k(\"button\",{className:\"btn btn-info float-right\",onClick:this.handleSubmit},\"Save\")))),k(y.a,{ref:function(t){e.dialog=t}})))}}]),a}(f.a.Component)},rePB:function(e,t,a){\"use strict\";function n(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}a.d(t,\"a\",(function(){return n}))},si5y:function(e,t,a){(window.__NEXT_P=window.__NEXT_P||[]).push([\"/agent_users/edit\",function(){return a(\"NPrD\")}])}},[[\"si5y\",0,2,4,1,3,5,6]]]);","extractedComments":[]}