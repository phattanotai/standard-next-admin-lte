{"code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[33],{RNiq:function(e,a,t){\"use strict\";t.r(a);var n=t(\"o0o1\"),s=t.n(n),o=t(\"HaE+\"),r=t(\"q1tI\"),l=t.n(r),i=t(\"nOHt\"),u=t.n(i),c=t(\"p46w\"),m=t.n(c),d=t(\"hryD\"),p=l.a.createElement;a.default=function(){var e;e=!0,m.a.get(\"user\")&&e?(console.log(\"user:=>\"+m.a.get(\"user\")),Object(r.useEffect)((function(){\"/\"==u.a.pathname&&u.a.push(\"/admin\")}),[])):Object(r.useEffect)((function(){u.a.pathname,u.a.push(\"/\")}),[]);var a=Object(r.useState)({username:\"\",password:\"\"}),t=a[0],n=a[1],i=Object(r.useState)(\"\"),c=i[0],g=i[1],f=Object(r.useState)(!1),h=f[0],v=f[1];function w(){return(w=Object(o.a)(s.a.mark((function e(a){var n,o,r,l=this;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.preventDefault(),c&&g(\"\"),e.prev=2,e.next=5,d.f.login(t);case 5:n=e.sent,console.log(\"login : \"+t),2e3===n.data.status?(o=n.data.data,console.log(\"res data id=> \"+o.id),m.a.set(\"userid\",o.id),m.a.set(\"user\",t.username),r=o.level,d.f.listSystemRole().then((function(e){console.log(e.data);var a=e.data,t=a.data,n=a.status,s=t;2e3===n?d.f.listMenu().then((function(e){console.log(e.data);var a=e.data,t=a.data;if(2e3===a.status){var n,o,i=[];for(n=0;n<s.length;n++)if(s[n].user_level_id==r){console.log(\"user role : \"+s[n].user_level_name),console.log(\"user perm : \"+s[n].user_level_permission);var c=s[n].user_level_permission;c&&(i=c.split(\"-\"))}if(console.log(\"data length : \"+t.length),console.log(\"perm length : \"+i.length),t.length==i.length)for(o=0;o<t.length;o++)console.log(\"perm [\"+o+\"]: \"+Number(i[o])),m.a.set(t[o].menu_name.split(\" \").join(\"\"),Number(i[o])),console.log(\"menu \"+t[o].menu_name.split(\" \").join(\"\")+\":\"+m.a.get(t[o].menu_name.split(\" \").join(\"\")));console.log(\"go to admin page\"),u.a.push(\"/admin\",{data:t})}else l.setErrorMsg(e.data.msg)})):l.setErrorMsg(e.data.msg)}))):(console.log(n),g(n.data.message+\"!!!\"),v(!0)),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(2),console.error(\"An unexpected error happened occurred:\",e.t0),g(e.t0.message);case 14:case\"end\":return e.stop()}}),e,null,[[2,10]])})))).apply(this,arguments)}return p(l.a.Fragment,null,p(\"div\",{id:\"login\",className:\"login\"},p(\"div\",{className:\"container\"},p(\"div\",{id:\"login-row\",className:\"row justify-content-center align-items-center\"},p(\"div\",{id:\"login-column\",className:\"col-md-6\"},p(\"div\",{id:\"login-box\",className:\"col-md-12\"},p(\"h1\",{className:\"text-center text-white pt-5\"},\"BigWin\"),p(\"div\",{className:\"form-group text-center\"},p(\"img\",{src:d.e.imageshow(\"backend_logo.png\"),id:\"icon\",alt:\"User Icon\",className:\"logo\"}),p(\"h3\",{className:\"text-center text-white pt-0\"},\"Web Admin\")),p(\"form\",{id:\"login-form\",className:\"form-group\",onSubmit:function(e){return w.apply(this,arguments)}},p(\"div\",{className:\"form-group\"},p(\"input\",{type:\"text\",name:\"username\",id:\"username\",className:\"form-control\",placeholder:\"Username\",onChange:function(e){n({username:e.target.value,password:t.password}),v(!1)},value:t.username})),p(\"div\",{className:\"form-group\"},p(\"input\",{type:\"password\",name:\"password\",id:\"password\",className:\"form-control\",placeholder:\"Password\",onChange:function(e){n({password:e.target.value,username:t.username}),v(!1)},value:t.password})),p(\"div\",{className:\"form-group\"},p(\"input\",{type:\"submit\",name:\"submit\",className:\"btn btn-info btn-md\",defaultValue:\"submit\"})),h?p(\"div\",{className:\"p-3 mb-2 bg-danger text-white\"},c):null)))))))}},vlRD:function(e,a,t){(window.__NEXT_P=window.__NEXT_P||[]).push([\"/\",function(){return t(\"RNiq\")}])}},[[\"vlRD\",0,2,1,3,6]]]);","extractedComments":[]}