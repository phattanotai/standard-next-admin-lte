{"code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[35],{RNiq:function(e,a,n){\"use strict\";n.r(a);var t=n(\"o0o1\"),s=n.n(t),o=n(\"HaE+\"),r=n(\"q1tI\"),l=n.n(r),i=n(\"nOHt\"),u=n.n(i),m=n(\"p46w\"),c=n.n(m),d=n(\"hryD\"),g=l.a.createElement;a.default=function(){var e;e=!0,c.a.get(\"user\")&&e?(console.log(\"user:=>\"+c.a.get(\"user\")),Object(r.useEffect)((function(){\"/\"==u.a.pathname&&u.a.push(\"/admin\")}),[])):Object(r.useEffect)((function(){u.a.pathname,u.a.push(\"/\")}),[]);var a=Object(r.useState)({username:\"\",password:\"\"}),n=a[0],t=a[1],i=Object(r.useState)(\"\"),m=i[0],p=i[1],f=Object(r.useState)(!1),h=f[0],v=f[1];function w(){return(w=Object(o.a)(s.a.mark((function e(a){var t,o,r,l=this;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.preventDefault(),m&&p(\"\"),e.prev=2,e.next=5,d.g.login(n);case 5:t=e.sent,console.log(\"login : \"+n),2e3===t.data.status?(o=t.data.data,console.log(\"res data id=> \"+o.id),c.a.set(\"userid\",o.id),c.a.set(\"user\",n.username),r=o.level,d.g.listSystemRole().then((function(e){console.log(e.data);var a=e.data,n=a.data,t=a.status,s=n;2e3===t?d.g.listMenu().then((function(e){console.log(e.data);var a=e.data,n=a.data;if(2e3===a.status){var t,o,i=[];for(t=0;t<s.length;t++)if(s[t].user_level_id==r){console.log(\"user role : \"+s[t].user_level_name),console.log(\"user perm : \"+s[t].user_level_permission);var m=s[t].user_level_permission;m&&(i=m.split(\"-\"))}if(console.log(\"data length : \"+n.length),console.log(\"perm length : \"+i.length),n.length==i.length)for(o=0;o<n.length;o++)console.log(\"perm [\"+o+\"]: \"+Number(i[o])),c.a.set(n[o].menu_name.split(\" \").join(\"\"),Number(i[o])),console.log(\"menu \"+n[o].menu_name.split(\" \").join(\"\")+\":\"+c.a.get(n[o].menu_name.split(\" \").join(\"\")));else for(o=0;o<n.length;o++)o>=i.length?c.a.set(n[o].menu_name.split(\" \").join(\"\"),0):(console.log(\"perm [\"+o+\"]: \"+Number(i[o])),c.a.set(n[o].menu_name.split(\" \").join(\"\"),Number(i[o])),console.log(\"menu \"+n[o].menu_name.split(\" \").join(\"\")+\":\"+c.a.get(n[o].menu_name.split(\" \").join(\"\"))));console.log(\"go to admin page\"),u.a.push(\"/admin\",{data:n})}else l.setErrorMsg(e.data.msg)})):l.setErrorMsg(e.data.msg)}))):(console.log(t),p(t.data.message+\"!!!\"),v(!0)),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(2),console.error(\"An unexpected error happened occurred:\",e.t0),p(e.t0.message);case 14:case\"end\":return e.stop()}}),e,null,[[2,10]])})))).apply(this,arguments)}return g(l.a.Fragment,null,g(\"div\",{id:\"login\",className:\"login\"},g(\"div\",{className:\"container\"},g(\"div\",{id:\"login-row\",className:\"row justify-content-center align-items-center\"},g(\"div\",{id:\"login-column\",className:\"col-md-6\"},g(\"div\",{id:\"login-box\",className:\"col-md-12\"},g(\"h1\",{className:\"text-center text-white pt-5\"},\"BigWin\"),g(\"div\",{className:\"form-group text-center\"},g(\"img\",{src:d.e.imageshow(\"backend_logo.png\"),id:\"icon\",alt:\"User Icon\",className:\"logo\"}),g(\"h3\",{className:\"text-center text-white pt-0\"},\"Web Admin\")),g(\"form\",{id:\"login-form\",className:\"form-group\",onSubmit:function(e){return w.apply(this,arguments)}},g(\"div\",{className:\"form-group\"},g(\"input\",{type:\"text\",name:\"username\",id:\"username\",className:\"form-control\",placeholder:\"Username\",onChange:function(e){t({username:e.target.value,password:n.password}),v(!1)},value:n.username})),g(\"div\",{className:\"form-group\"},g(\"input\",{type:\"password\",name:\"password\",id:\"password\",className:\"form-control\",placeholder:\"Password\",onChange:function(e){t({password:e.target.value,username:n.username}),v(!1)},value:n.password})),g(\"div\",{className:\"form-group\"},g(\"input\",{type:\"submit\",name:\"submit\",className:\"btn btn-info btn-md\",defaultValue:\"submit\"})),h?g(\"div\",{className:\"p-3 mb-2 bg-danger text-white\"},m):null)))))))}},vlRD:function(e,a,n){(window.__NEXT_P=window.__NEXT_P||[]).push([\"/\",function(){return n(\"RNiq\")}])}},[[\"vlRD\",0,2,1,3,6]]]);","extractedComments":[]}