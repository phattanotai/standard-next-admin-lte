{"ast":null,"code":"var __jsx = React.createElement;\nimport AdminLayoutHoc from '../components/Layout/AdminLayoutHoc';\nimport { Pie, Doughnut } from \"react-chartjs-2\";\nimport { MDBContainer } from \"mdbreact\";\nimport React, { useState, useEffect } from \"react\";\nimport Router from \"next/router\";\nimport Cookies, { getJSON } from \"js-cookie\";\nimport { ServiceBrand } from \"../service\";\nimport { ServiceImage } from \"../service\";\nimport Dialog from 'react-bootstrap-dialog';\nimport { ServiceGameList } from \"../service\";\nimport { ServiceAgent } from \"../service\";\nimport { ServiceGameService } from \"../service\"; //import { Image } from \"react-native\";\n\nexport default class Admin extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      isLoading: true,\n      data_brand: [],\n      data_game: [],\n      data_service: [],\n      data_agent: [],\n      errorMessage: \"\",\n      startrow: 0,\n      endrow: 4,\n      rawdata_brand: [],\n      rawdata_game: [],\n      rawdata_service: [],\n      rawdata_agent: [],\n      searchtxt1: \"\",\n      searchtxt2: \"\",\n      searchtxt3: \"\",\n      img_width: 80,\n      img_height: 80,\n      dataPie: {\n        labels: [\"Red\", \"Green\", \"Yellow\", \"Grey\", \"Dark Grey\"],\n        datasets: [{\n          data: [300, 50, 100, 40, 120],\n          backgroundColor: [\"#F7464A\", \"#46BFBD\", \"#FDB45C\", \"#949FB1\", \"#4D5360\", \"#AC64AD\"],\n          hoverBackgroundColor: [\"#FF5A5E\", \"#5AD3D1\", \"#FFC870\", \"#A8B3C5\", \"#616774\", \"#DA92DB\"]\n        }]\n      },\n      dataDoughnut: {\n        labels: [\"Red\", \"Green\", \"Yellow\", \"Grey\", \"Dark Grey\"],\n        datasets: [{\n          data: [300, 50, 100, 40, 120],\n          backgroundColor: [\"#F7464A\", \"#46BFBD\", \"#FDB45C\", \"#949FB1\", \"#4D5360\"],\n          hoverBackgroundColor: [\"#FF5A5E\", \"#5AD3D1\", \"#FFC870\", \"#A8B3C5\", \"#616774\"]\n        }]\n      }\n    }; //this.onClick = this.onClick.bind(this);\n\n    this.onSearchClick1 = this.onSearchClick1.bind(this);\n    this.onSearchClick2 = this.onSearchClick2.bind(this);\n    this.onSearchClick3 = this.onSearchClick3.bind(this);\n    this.setErrorMsg = this.setErrorMsg.bind(this);\n  }\n\n  onSearchClick1() {\n    var name = this.state.searchtxt1; //this.setState({ searchtxt1: e.target.value });\n    //console.log(name);\n\n    var datalength = this.state.rawdata_brand.length;\n\n    if (name != \"\") {\n      //console.log('rawdata' + JSON.stringify(this.state.rawdata));\n      this.setState({\n        data_brand: this.state.rawdata_brand.filter(data => {\n          return data.brand_name.indexOf(name) !== -1;\n        })\n      });\n      datalength = this.state.rawdata_brand.filter(data => {\n        return data.brand_name.indexOf(name) !== -1;\n      }).length;\n    } else {\n      this.setState({\n        data_brand: this.state.rawdata_brand\n      });\n    }\n  }\n\n  onSearchClick2() {\n    var name = this.state.searchtxt2; //this.setState({ searchtxt1: e.target.value });\n    //console.log(name);\n\n    var datalength = this.state.rawdata_game.length;\n\n    if (name != \"\") {\n      //console.log('rawdata' + JSON.stringify(this.state.rawdata));\n      this.setState({\n        data_game: this.state.rawdata_game.filter(data => {\n          return data.game_name.indexOf(name) !== -1;\n        })\n      });\n      datalength = this.state.rawdata_game.filter(data => {\n        return data.game_name.indexOf(name) !== -1;\n      }).length;\n    } else {\n      this.setState({\n        data_game: this.state.rawdata_game\n      });\n    }\n  }\n\n  onSearchClick3() {\n    var name = this.state.searchtxt3; //this.setState({ searchtxt1: e.target.value });\n    //console.log(name);\n\n    var datalength = this.state.rawdata_agent.length;\n\n    if (name != \"\") {\n      //console.log('rawdata' + JSON.stringify(this.state.rawdata));\n      this.setState({\n        data_agent: this.state.rawdata_agent.filter(data => {\n          return data.agent_name.indexOf(name) !== -1;\n        })\n      });\n      datalength = this.state.rawdata_agent.filter(data => {\n        return data.agent_name.indexOf(name) !== -1;\n      }).length;\n    } else {\n      this.setState({\n        data_agent: this.state.rawdata_agent\n      });\n    }\n  }\n\n  componentDidMount() {\n    if (!Cookies.get(\"user\")) {\n      Router.push(\"/\");\n    }\n\n    ServiceBrand.listBrands().then(res => {\n      console.log(res.data);\n      const {\n        data,\n        status\n      } = res.data;\n\n      if (status === 2000) {\n        console.log(\"data length : \" + data.length);\n        this.setState({\n          data_brand: data\n        });\n        this.setState({\n          rawdata_brand: data\n        });\n      } else {\n        this.setErrorMsg(res.data.msg);\n      }\n    });\n    ServiceGameList.listGames().then(res => {\n      console.log(res.data);\n      const {\n        data,\n        status\n      } = res.data;\n\n      if (status === 2000) {\n        console.log(\"data length : \" + data.length);\n        this.setState({\n          data_game: data\n        });\n        this.setState({\n          rawdata_game: data\n        });\n      } else {\n        this.setErrorMsg(res.data.msg);\n      }\n    });\n    ServiceAgent.listAgent().then(res => {\n      console.log(res.data);\n      const {\n        data,\n        status\n      } = res.data;\n\n      if (status === 2000) {\n        console.log(\"data length : \" + data.length);\n        this.setState({\n          data_agent: data\n        });\n        this.setState({\n          rawdata_agent: data\n        });\n      } else {\n        this.setErrorMsg(res.data.msg);\n      }\n    });\n  }\n\n  setErrorMsg(msg) {\n    this.setState({\n      errorMessage: msg\n    });\n  }\n\n  render() {\n    return __jsx(AdminLayoutHoc, {\n      contentTitle: 'Dashboard',\n      contentTitleButton: __jsx(\"i\", {\n        className: \"fa fa-2x fa-home\"\n      }),\n      url: this.props.url\n    }, __jsx(\"div\", {\n      className: \"row\"\n    }, __jsx(\"div\", {\n      className: \"col-md-6\"\n    }, __jsx(\"div\", {\n      className: \"card\"\n    }, __jsx(\"div\", {\n      className: \"card-header\"\n    }, __jsx(\"h3\", {\n      className: \"card-title\"\n    }, __jsx(\"i\", {\n      className: \"fa fa-cubes\"\n    }), \"\\xA0Game Brand\"), __jsx(\"div\", {\n      className: \"card-tools d-inline-block\"\n    }, __jsx(\"div\", {\n      className: \"input-group input-group-sm\",\n      style: {\n        width: '100%'\n      }\n    }, __jsx(\"input\", {\n      type: \"text\",\n      name: \"table_search\",\n      className: \"form-control float-right\",\n      placeholder: \"Search\",\n      onChange: e => {\n        this.setState({\n          searchtxt1: e.target.value\n        });\n        var name = e.target.value; //console.log(name);\n\n        var datalength = this.state.rawdata_brand.length;\n\n        if (name != \"\") {\n          //console.log('rawdata' + JSON.stringify(this.state.rawdata));\n          this.setState({\n            data_brand: this.state.rawdata_brand.filter(data => {\n              return data.brand_name.indexOf(name) !== -1;\n            })\n          });\n          datalength = this.state.rawdata_brand.filter(data => {\n            return data.brand_name.indexOf(name) !== -1;\n          }).length;\n        } else {\n          this.setState({\n            data_brand: this.state.rawdata_brand\n          });\n        }\n      },\n      value: this.state.searchtxt1\n    }), __jsx(\"div\", {\n      className: \"input-group-append\"\n    }, __jsx(\"button\", {\n      className: \"btn btn-default\"\n    }, __jsx(\"i\", {\n      className: \"fa fa-search\",\n      onClick: this.onSearchClick1\n    })))))), __jsx(\"div\", {\n      className: \"card-body table-responsive p-0 \"\n    }, __jsx(\"table\", {\n      className: \"table table-hover table-striped table-bordered\"\n    }, __jsx(\"thead\", null, __jsx(\"tr\", null, __jsx(\"th\", null, \"Stauts\"), __jsx(\"th\", null, \"Img\"), __jsx(\"th\", null, \"Code\"), __jsx(\"th\", null, \"Name\"), __jsx(\"th\", null, \"Edit\"))), __jsx(\"tbody\", null, this.state.data_brand.map((brand, index) => {\n      let classBadge = 'danger';\n      let mystatus = 'disable';\n\n      if (brand.brand_status === '1') {\n        classBadge = 'success';\n        mystatus = 'enable';\n      }\n\n      if (index >= this.state.startrow && index < this.state.endrow) //console.log(\"userid\" + user.id);\n        return __jsx(\"tr\", {\n          key: index\n        }, __jsx(\"td\", {\n          className: \"py-1\"\n        }, __jsx(\"label\", {\n          className: `badge badge-${classBadge}`\n        }, mystatus)), __jsx(\"td\", {\n          className: \"py-1\"\n        }, __jsx(\"img\", {\n          src: brand.brand_img ? ServiceImage.imageshow(brand.brand_img) : ServiceImage.imageshow(\"1594692624651-no-image-available.png\"),\n          style: {\n            flex: 1,\n            width: null,\n            height: \"80px\",\n            resizeMode: 'contain'\n          }\n        })), __jsx(\"td\", {\n          className: \"py-1\"\n        }, brand.brand_code), __jsx(\"td\", {\n          className: \"py-1\"\n        }, brand.brand_name), __jsx(\"td\", {\n          className: \"py-1\"\n        }, __jsx(\"button\", {\n          type: \"button\",\n          className: \"btn btn-warning btn-icon-text\",\n          onClick: () => {\n            console.log(\"edit Brand id:\" + brand._id);\n            Cookies.set(\"brandId\", brand._id);\n            Router.push(\"/game_bands/edit\");\n          }\n        }, \"Edit\")));\n    })))))), __jsx(\"div\", {\n      className: \"col-md-6\"\n    }, __jsx(\"div\", {\n      className: \"card\"\n    }, __jsx(\"div\", {\n      className: \"card-header\"\n    }, __jsx(\"h3\", {\n      className: \"card-title\"\n    }, __jsx(\"i\", {\n      className: \"fa fa-bars\"\n    }), \"\\xA0Game List\"), __jsx(\"div\", {\n      className: \"card-tools d-inline-block\"\n    }, __jsx(\"div\", {\n      className: \"input-group input-group-sm\",\n      style: {\n        width: '100%'\n      }\n    }, __jsx(\"input\", {\n      type: \"text\",\n      name: \"table_search\",\n      className: \"form-control float-right\",\n      placeholder: \"Search\",\n      onChange: e => {\n        this.setState({\n          searchtxt2: e.target.value\n        });\n        var name = e.target.value; //console.log(name);\n\n        var datalength = this.state.rawdata_game.length;\n\n        if (name != \"\") {\n          //console.log('rawdata' + JSON.stringify(this.state.rawdata));\n          this.setState({\n            data_game: this.state.rawdata_game.filter(data => {\n              return data.game_name.indexOf(name) !== -1;\n            })\n          });\n          datalength = this.state.rawdata_game.filter(data => {\n            return data.game_name.indexOf(name) !== -1;\n          }).length;\n        } else {\n          this.setState({\n            data_game: this.state.rawdata_game\n          });\n        }\n      },\n      value: this.state.searchtxt2\n    }), __jsx(\"div\", {\n      className: \"input-group-append\"\n    }, __jsx(\"button\", {\n      className: \"btn btn-default\"\n    }, __jsx(\"i\", {\n      className: \"fa fa-search\",\n      onClick: this.onSearchClick2\n    })))))), __jsx(\"div\", {\n      className: \"card-body table-responsive p-0\"\n    }, __jsx(\"table\", {\n      className: \"table table-hover  table-striped table-bordered\"\n    }, __jsx(\"thead\", null, __jsx(\"tr\", null, __jsx(\"th\", null, \"Stauts\"), __jsx(\"th\", null, \"Img\"), __jsx(\"th\", null, \"Code\"), __jsx(\"th\", null, \"Name\"), __jsx(\"th\", null, \"Brand\"), __jsx(\"th\", null, \" Edit \"))), __jsx(\"tbody\", null, this.state.data_game.map((game, index) => {\n      let classBadge = 'danger';\n      let mystatus = 'disable';\n\n      if (game.game_status == 1) {\n        classBadge = 'success';\n        mystatus = 'enable';\n      }\n\n      if (index >= this.state.startrow && index < this.state.endrow) //console.log(\"userid\" + user.id);\n        return __jsx(\"tr\", {\n          key: index\n        }, __jsx(\"td\", {\n          className: \"py-1\"\n        }, __jsx(\"label\", {\n          className: `badge badge-info`,\n          style: {\n            display: game.game_new === 'Yes' ? 'block' : 'none'\n          }\n        }, \"new\"), __jsx(\"label\", {\n          className: `badge badge-${classBadge}`,\n          style: {\n            display: 'block'\n          }\n        }, mystatus)), __jsx(\"td\", {\n          className: \"py-1\"\n        }, __jsx(\"img\", {\n          src: game.game_img ? ServiceImage.imageshow(game.game_img) : ServiceImage.imageshow(\"1594692624651-no-image-available.png\"),\n          style: {\n            flex: 1,\n            width: \"80px\",\n            height: null,\n            resizeMode: 'contain'\n          }\n        })), __jsx(\"td\", {\n          className: \"py-1\"\n        }, game.game_code), __jsx(\"td\", {\n          className: \"py-1\"\n        }, game.game_name), __jsx(\"td\", {\n          className: \"py-1\"\n        }, game.game_brand), __jsx(\"td\", {\n          className: \"py-1\"\n        }, __jsx(\"button\", {\n          type: \"button\",\n          className: \"btn btn-warning btn-icon-text\",\n          onClick: () => {\n            console.log(\"edit game id:\" + game._id);\n            Cookies.set(\"gameId\", game._id);\n            Router.push(\"/game_lists/edit\");\n          } //onClick={this.onClick}\n\n        }, \"Edit\")));\n    }))))))), __jsx(\"div\", {\n      className: \"row\"\n    }, __jsx(\"div\", {\n      className: \"col-md-12\"\n    }, __jsx(\"div\", {\n      className: \"card\"\n    }, __jsx(\"div\", {\n      className: \"card-header\"\n    }, __jsx(\"h3\", {\n      className: \"card-title\"\n    }, __jsx(\"i\", {\n      className: \"fa fa-id-badge\"\n    }), \"\\xA0Agents\"), __jsx(\"div\", {\n      className: \"card-tools d-inline-block\"\n    }, __jsx(\"div\", {\n      className: \"input-group input-group-sm\",\n      style: {\n        width: '100%'\n      }\n    }, __jsx(\"input\", {\n      type: \"text\",\n      name: \"table_search\",\n      className: \"form-control float-right\",\n      placeholder: \"Search\",\n      onChange: e => {\n        this.setState({\n          searchtxt3: e.target.value\n        });\n        var name = e.target.value; //console.log(name);\n\n        var datalength = this.state.rawdata_agent.length;\n\n        if (name != \"\") {\n          //console.log('rawdata' + JSON.stringify(this.state.rawdata));\n          this.setState({\n            data_agent: this.state.rawdata_agent.filter(data => {\n              return data.agent_name.indexOf(name) !== -1;\n            })\n          });\n          datalength = this.state.rawdata_agent.filter(data => {\n            return data.agent_name.indexOf(name) !== -1;\n          }).length;\n        } else {\n          this.setState({\n            data_agent: this.state.rawdata_agent\n          });\n        }\n      },\n      value: this.state.searchtxt3\n    }), __jsx(\"div\", {\n      className: \"input-group-append\"\n    }, __jsx(\"button\", {\n      className: \"btn btn-default\"\n    }, __jsx(\"i\", {\n      className: \"fa fa-search\",\n      onClick: this.onSearchClick3\n    })))))), __jsx(\"div\", {\n      className: \"card-body table-responsive p-0\"\n    }, __jsx(\"table\", {\n      className: \"table table-hover  table-striped table-bordered\"\n    }, __jsx(\"thead\", null, __jsx(\"tr\", null, __jsx(\"th\", null, \"Code\"), __jsx(\"th\", null, \"Name\"), __jsx(\"th\", null, \"LineUp\"), __jsx(\"th\", null, \"Line@\"), __jsx(\"th\", null, \"WebSite\"), __jsx(\"th\", null, \"Type\"), __jsx(\"th\", null, \"Edit\"))), __jsx(\"tbody\", null, this.state.data_agent.map((agent, index) => {\n      let classBadge = 'danger';\n      let mystatus = 'disable';\n\n      if (agent.agent_status === '1') {\n        classBadge = 'success';\n        mystatus = 'enable';\n      }\n\n      if (index >= this.state.startrow && index < this.state.endrow) return __jsx(\"tr\", {\n        key: index\n      }, __jsx(\"td\", {\n        className: \"py-1\"\n      }, __jsx(\"label\", {\n        className: `badge badge-${classBadge}`\n      }, mystatus), agent.agent_code), __jsx(\"td\", {\n        className: \"py-1\"\n      }, agent.agent_name), __jsx(\"td\", {\n        className: \"py-1\"\n      }, agent.agent_lineup), __jsx(\"td\", {\n        className: \"py-1\"\n      }, agent.agent_line_ad), __jsx(\"td\", {\n        className: \"py-1\"\n      }, agent.agent_website), __jsx(\"td\", {\n        className: \"py-1\"\n      }, agent.agent_type), __jsx(\"td\", {\n        className: \"py-1\"\n      }, __jsx(\"button\", {\n        type: \"button\",\n        className: \"btn btn-warning btn-icon-text\",\n        onClick: () => {\n          console.log(\"edit agent id\" + agent._id);\n          Cookies.set(\"agentid\", agent._id);\n          Router.push(\"/agents/edit\");\n        }\n      }, \"Edit\")));\n    }))))))));\n  }\n\n}","map":null,"metadata":{},"sourceType":"module"}